<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This</title>
</head>
<body>
    1. This trong Javascript
    - Từ khóa this sẽ trỏ về đối tượng mà nó đang thuộc về.
    - Trong javascript, bạn có thể đặt this ngay cấp ngoài cùng của chương trình, 
    vì đối tượng cao nhất chính là đối tượng Windows, nên kết quả là từ khóa this 
    sẽ trỏ đến đối tượng windows.
    <script>
        // console.log(this);
    </script>

    2. This trong javascript function
    - Trường hợp 1: Nếu không bật chế độ strict mode thì javascript sẽ hiểu this là một biến 
    toàn cục, và cấp cao nhất chính là đối tượng window.
    - Trường hợp 2: Nếu bật chế độ strict mode thì từ khóa this trong hàm là một biến chưa được 
    định nghĩa, nên giá trị của nó là undefined.
    <script>
        // "use strict";

        // function test() {
        //     console.log(this);
        // }
        // test();
    </script>

    3. This trong các sự kiện javascript
    - Khi gán hành động cho các sự kiện javascript thì this chính là đối tượng html 
    đang được gán sự kiện đó. (this sẽ trỏ về đối tượng trước dấu chấm)
    <button id="button">Button</button>
    <ul id="menu">
        <li>Mục 1</li>
        <li>Mục 2</li>
        <li>Mục 3</li>
    </ul>
    <script>
        // const button = document.querySelector("#button");
        // button.addEventListener("click", function() {
        //     console.log(this);
        // });

        // const listItem = document.querySelectorAll("#menu li");
        // console.log(listItem);

        // [...listItem].forEach(function(item) {
        //     item.addEventListener("click", function() {
        //         console.log(this);
        //     });
        // });
    </script>

    4. This trong javascript object
    <script>
        let info = {
            fullname: "Nguyen Quang Thoa",
            age: 18,
            email: "thoa2001@gmail.com",
            getFullname: function() {
                console.log(this.fullname);
            },
            cccd: {
                fullname: "NGUYEN QUANG THOA",
                address: "so 123, duong abc",
                getInfoCCCD: function() {
                    console.log(this.fullname);
                }
            }
        };

        info.getFullname();
        info.cccd.getInfoCCCD();
    </script>

    5. This trong arrow function
    - Không giống như function bình thường. Arrow function không tồn tại đối tượng this.
    - Bởi vậy khi bạn sử dụng thì nó sẽ lấy đối tượng global window.
    <script>
        const button = document.querySelector("#button");
        button.addEventListener("click", function() {
            console.log(this);
        });

        const listItem = document.querySelectorAll("#menu li");
        console.log(listItem);

        [...listItem].forEach(function(item) {
            item.addEventListener("click", () => {
                console.log(item);
                // console.log(this); //don't use "this" here
            });
        });
    </script>
</body>
</html>